(this["webpackJsonpairgarage-challenge"]=this["webpackJsonpairgarage-challenge"]||[]).push([[0],{57:function(e,t,a){},59:function(e,t,a){},60:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},94:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(8),s=a.n(r),o=a(10),i=a(16),l=a(14),d=a(36),u=a(2),j={loading:!1,data:{},error:"",searchedText:""},b="LOADING_SEARCH_RESULTS",h="SUCCESSFULLY_LOADED_SEARCH_RESULTS",m="SUCCESSFULLY_LOADED_SEARCH_RESULTS",O="SUCCESSFULLY_LOADED_MORE_SEARCH_RESULTS",p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(u.a)(Object(u.a)({},e),{},{loading:!0,searchedText:""});case h:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,searchedText:t.searchedText,data:t.payload});case m:return Object(u.a)(Object(u.a)({},e),{},{loading:!1,searchedText:"",data:[],error:t.error});case O:return Object(u.a)(Object(u.a)({},e),{},{data:t.payload});default:return e}},v=Object(l.b)({search:p}),f=Object(l.c)(v,Object(l.a)(d.a)),x=a(41),g=a(3),N=(a(57),a(1)),_=a(9),S=(a(59),["text","children","className"]),w=function(e){var t=e.text,a=e.children,n=e.className,c=Object(_.a)(e,S);return Object(N.jsx)("button",Object(u.a)(Object(u.a)({className:"button ".concat(n)},c),{},{children:t||a}))},E=a.p+"static/media/search.6c95e853.svg",k=a.p+"static/media/star-filled.b54bc8dd.svg",y=a.p+"static/media/star.21e67b80.svg",C=a.p+"static/media/call.4f06bac0.svg",T=a.p+"static/media/clear.244b6687.svg",L="search",R="star-filled",A="star",D="call",U="clear",F=(a(60),["name","className","isTab"]),I=function(e){switch(e){case L:return E;case R:return k;case A:return y;case D:return C;case U:return T;default:return null}},H=function(e){var t=e.name,a=void 0===t?"user":t,n=e.className,c=e.isTab,r=void 0!==c&&c,s=Object(_.a)(e,F);if(r){return Object(N.jsx)("a",{href:"/",onClick:function(e){return e.preventDefault()},children:Object(N.jsx)("img",Object(u.a)({className:"icon ".concat(n),alt:a,src:I(a)},s))})}return Object(N.jsx)("img",Object(u.a)({className:"icon ".concat(n),alt:a,src:I(a)},s))},P=(a(61),["text","className","component"]),G=function(e){var t=e.text,a=e.className,n=e.component,c=void 0===n?"p":n,r=Object(_.a)(e,P),s=c;return Object(N.jsx)(s,Object(u.a)(Object(u.a)({className:"title ".concat(a)},r),{},{children:t}))},W=(a(62),function(e){var t=e.text,a=e.className;return Object(N.jsx)("p",{className:"text ".concat(a),children:t})}),Y="Open now",J="Close now",M=function(){return Object(N.jsx)("a",{href:"/",alt:"Logo",children:Object(N.jsx)("img",{src:"https://assets.website-files.com/5d55f1425cb6b7a18aa77528/5d55f8a49a649a59aab64b1c_airgarage-logo.png",alt:"air-garage-logo",width:"138"})})},z=(a(63),["text","label","className","onClearHandler","ref"]),B=function(e){var t=e.text,a=void 0===t?"":t,n=e.label,c=e.className,r=e.onClearHandler,s=e.ref,o=Object(_.a)(e,z);return Object(N.jsxs)("div",{className:"input-text ".concat(c),children:[n&&Object(N.jsx)("label",{children:n}),Object(N.jsxs)("div",{className:"input-text__area",children:[Object(N.jsx)("input",Object(u.a)({ref:s,value:a,onChange:function(){}},o)),a&&Object(N.jsx)(H,{name:U,className:"clear",onClick:function(){return null===r||void 0===r?void 0:r()}})]})]})},K=(a(64),function(){return Object(N.jsxs)("div",{className:"header",children:[Object(N.jsx)(M,{className:"header__logo"}),Object(N.jsx)("h1",{children:"Find parking"})]})}),q=(a(65),function(){return Object(N.jsx)("div",{className:"footer",children:Object(N.jsx)("span",{className:"footer--copyright-text",children:"\xa92021 AirGarage, Inc"})})}),Q=a(13),V=a(11),X=a.n(V),Z=a(17),$=a(37),ee=a.n($),te=function(){return{type:b}},ae=function(e,t){return{type:h,payload:e,searchedText:t}},ne=function(e){return{type:m,error:e}},ce=function(){var e=Object(Z.a)(X.a.mark((function e(t,a){return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.a.get("".concat("https://parking-api-043.herokuapp.com","/getparkingbylocation?location=").concat(t,"&limit=").concat(a));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),re=function(){var e=Object(Z.a)(X.a.mark((function e(t,a){var n,c,r=arguments;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>2&&void 0!==r[2]?r[2]:10,t(te()),e.prev=2,e.next=5,ce(a,n);case 5:c=e.sent,t(ae(null===c||void 0===c?void 0:c.data,a)),e.next=14;break;case 9:return e.prev=9,e.t0=e.catch(2),console.error("Something went wrong due to ",e.t0),t(ne("Something went wrong")),e.abrupt("return",Promise.reject());case 14:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t,a){return e.apply(this,arguments)}}(),se=function(){var e=Object(Z.a)(X.a.mark((function e(t,a,n){var c;return X.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce(a,n);case 3:c=e.sent,t((r=null===c||void 0===c?void 0:c.data,{type:O,payload:r})),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),console.error("Something went wrong due to ",e.t0),t(ne("Something went wrong")),e.abrupt("return",Promise.reject());case 12:case"end":return e.stop()}var r}),e,null,[[0,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),oe={autoDismiss:!0,autoDismissTimeout:2e3,transitionDuration:800},ie={SUCCESS:Object(u.a)({appearance:"success"},oe),ERROR:Object(u.a)({appearance:"error"},oe),WARNING:Object(u.a)({appearance:"warning"},oe),INFO:Object(u.a)({appearance:"info"},oe)},le="Search text length should be greater than 3",de="Please enter search address..",ue="Something went wrong. Please try again..",je=(a(85),Object(n.memo)((function(e){var t=e.className,a=Object(n.useState)(""),c=Object(Q.a)(a,2),r=c[0],s=c[1],l=Object(o.b)(),d=function(){var e=Object(i.useToasts)().addToast;return{addToast:function(t){return e(t,ie.SUCCESS)},addErrorToast:function(t){return e(t,ie.ERROR)},addWarningToast:function(t){return e(t,ie.WARNING)},addInfoToast:function(t){return e(t,ie.INFO)}}}().addErrorToast,u=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:500;return function(){for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];var s=this;clearTimeout(t),t=setTimeout((function(){return e.apply(s,c)}),a)}}((function(){(null===r||void 0===r?void 0:r.length)>=3?(re(l,r).catch((function(){d(ue)})),j()):(null===r||void 0===r?void 0:r.length)<=3?d(le):d(de)})),j=function(){return s("")};return Object(N.jsxs)("div",{className:"search-box mb-1 pb-3 ".concat(t),children:[Object(N.jsx)(B,{className:"search-box__address-input",text:r,label:"Location",placeholder:"Search address...",onChange:function(e){var t=(null===e||void 0===e?void 0:e.target).value;r!==t&&s(t)},onKeyPress:function(e){"Enter"===(null===e||void 0===e?void 0:e.key)&&u()},onClearHandler:j}),Object(N.jsx)(w,{className:"ml-3 search-box__search-button",text:"Search",onClick:u})]})}))),be=function(e){var t=e.phoneNumber,a=e.phone,n=e.className;return Object(N.jsxs)("a",{className:"phone-number ".concat(n),href:"tel:".concat(a||t),children:[Object(N.jsx)(H,{name:D}),t]})},he=function(e){var t=e.score,a=e.className,n=e.tooltip;return Object(N.jsxs)("div",{className:"rating-bar ".concat(a),title:n,children:[Object(N.jsx)(H,{name:R}),Object(N.jsx)("span",{className:"ml-1",children:t})]})},me=(a(86),function(e){var t=e.name,a=e.image_url,n=e.is_closed,c=e.url,r=e.review_count,s=e.rating,o=e.display_phone,i=e.phone,l=e.location.display_address,d=(r*s/(r+1)).toFixed(1);return Object(N.jsxs)("a",{className:"parking-card",href:c,target:"_blank",rel:"noreferrer",children:[Object(N.jsx)("div",{className:"parking-card__image-area",children:Object(N.jsx)("img",{className:"lazyload","data-src":a,alt:t})}),Object(N.jsxs)("div",{className:"parking-card__content-area",children:[Object(N.jsx)(G,{className:"parking-card__content-area__name small mb-2",text:t,component:"h2",title:t}),Object(N.jsxs)("div",{className:"parking-card__content-area__score-rating-reviews mb-2",children:[Object(N.jsx)(he,{className:"score mr-1",score:d,tooltip:"Score"}),Object(N.jsx)("div",{className:"rating-reviews",children:Object(N.jsx)(W,{text:"".concat(s," Ratings & ").concat(r," Reviews")})})]}),Object(N.jsxs)("div",{className:"parking-card__content-area__address mb-2",children:[Object(N.jsxs)("div",{className:"address",children:[Object(N.jsx)("span",{children:"Address:"})," ",l.join(" ")]}),o&&Object(N.jsx)(be,{className:"phone",phoneNumber:o,phone:i})]}),Object(N.jsxs)("div",{className:"parking-card__content-area__status",children:[Object(N.jsx)("span",{className:"status ".concat(n?"red":"green"),children:n?J:Y}),Object(N.jsx)("span",{className:"explore-more",children:"Explore more"})]})]})]})}),Oe=(a(87),function(){var e=Object(n.useState)(0),t=Object(Q.a)(e,2),c=t[0],r=t[1],s=Object(n.useState)("Load more"),i=Object(Q.a)(s,2),l=i[0],d=i[1],j=Object(o.b)(),b=Object(o.c)((function(e){return null===e||void 0===e?void 0:e.search})),h=b.data,m=(h=void 0===h?{}:h).total,O=void 0===m?0:m,p=h.businesses,v=void 0===p?[]:p,f=b.loading,x=b.error,g=b.searchedText;Object(n.useEffect)((function(){c!==(null===v||void 0===v?void 0:v.length)&&(r(null===v||void 0===v?void 0:v.length),d("Load more")),(null===v||void 0===v?void 0:v.length)>0&&(a(88),a(89))}),[v,c]);return Object(N.jsxs)("div",{className:"search-results",children:[x?"".concat(ue):f?"loading...":null===v||void 0===v?void 0:v.map((function(e){return Object(N.jsx)(me,Object(u.a)({},e),null===e||void 0===e?void 0:e.id)})),!x&&!f&&(null===v||void 0===v?void 0:v.length)>0&&O>c&&Object(N.jsx)("span",{className:"load-more",onClick:function(){g&&se(j,g,c+10),d("Loading...")},children:l})]})}),pe=(a(90),function(e){var t=e.children;return Object(N.jsxs)("div",{className:"page-template",children:[Object(N.jsx)(K,{className:"page-template__header"}),Object(N.jsx)("div",{className:"page-template__main",children:t}),Object(N.jsx)(q,{className:"page-template__footer"})]})}),ve=a(38),fe=a(39),xe=a(42),ge=a(40),Ne=function(e){Object(xe.a)(a,e);var t=Object(ge.a)(a);function a(e){var n;return Object(ve.a)(this,a),(n=t.call(this,e)).state={hasError:!1},n}return Object(fe.a)(a,[{key:"componentDidCatch",value:function(e,t){console.error(e,t)}},{key:"render",value:function(){return this.state.hasError?Object(N.jsx)("h1",{children:"Something went wrong."}):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(c.a.Component),_e=function(){return Object(N.jsxs)("div",{className:"search",children:[Object(N.jsx)(je,{className:"mb-3"}),Object(N.jsx)(Oe,{})]})};a(91);function Se(){return Object(N.jsx)("div",{className:"App",children:Object(N.jsx)(Ne,{children:Object(N.jsx)(pe,{children:Object(N.jsx)(x.a,{children:Object(N.jsx)(g.c,{children:Object(N.jsx)(g.a,{exact:!0,path:"/",component:_e})})})})})})}var we=document.getElementById("root");s.a.render(Object(N.jsx)(n.StrictMode,{children:Object(N.jsx)(o.a,{store:f,children:Object(N.jsx)(i.ToastProvider,{children:Object(N.jsx)(Se,{})})})}),we)}},[[94,1,2]]]);
//# sourceMappingURL=main.bc7fe2a8.chunk.js.map